/*!
* CookieConsent 3.1.0-rmdev-2.2
* https://github.com/orestbida/cookieconsent
* Author Orest Bida
* Released under the MIT License
*/
const e='opt-in',t='opt-out',n='data-category';class o{constructor(){this.t={mode:e,revision:0,autoClearCookies:!0,manageScriptTags:!0,hideFromBots:!0,cookie:{name:'cc_cookie',expiresAfterDays:182,domain:'',path:'/',secure:!0,sameSite:'Lax'},consentLogging:{enabled:!1,endpoint:'',usePreferHeader:!1}},this.o={i:{},_:'',u:{},C:{},v:{},S:[],h:!1,D:null,T:null,N:null,j:'',k:!0,O:!1,M:!0,A:[],L:!1,P:'',R:!1,I:[],F:[],J:[],H:[],U:!1,B:{},G:{},q:{},K:{},V:{},W:[]},this.X={},this.Y={Z:'cc:onFirstConsent',$:'cc:onConsent',ee:'cc:onChange'}}}const s=new o,a=(e,t)=>e.indexOf(t),c=(e,t)=>-1!==a(e,t),r=e=>Array.isArray(e),i=e=>'string'==typeof e,l=e=>!!e&&'object'==typeof e&&!r(e),d=e=>'function'==typeof e,f=e=>Object.keys(e),_=e=>Array.from(new Set(e)),u=e=>document.createElement(e),p=(e,t,n)=>e.setAttribute(t,n),g=(e,t,n)=>{e.removeAttribute(n?'data-'+t:t)},m=(e,t,n)=>e.getAttribute(n?'data-'+t:t),C=e=>{if('object'!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());let t=Array.isArray(e)?[]:{};for(let n in e){let o=e[n];t[n]=C(o)}return t},v=()=>{const e={},{I:t,B:n,G:o}=s.o;for(const s of t)e[s]=S(o[s],f(n[s]));return e},y=()=>{const e=s.t.cookie.expiresAfterDays;return d(e)?e(s.o.P):e},S=(e,t)=>{const n=e||[],o=t||[];return n.filter(e=>!c(o,e)).concat(o.filter(e=>!c(n,e)))},h=e=>{s.o.F=_(e),s.o.P=(()=>{let e='custom';const{F:t,I:n,J:o}=s.o,a=t.length;return a===n.length?e='all':a===o.length&&(e='necessary'),e})()},w=()=>{const{k:e,F:t,I:n}=s.o;return{accepted:t,rejected:e?[]:n.filter(e=>!c(t,e))}},D=(e,t,n)=>{const{ee:o,$:a,Z:c,te:r,ne:i,oe:l}=s.X,f=s.Y,_={cookie:s.o.v};e===f.Z?d(c)&&c(C(_)):e===f.$?d(a)&&a(C(_)):(_.changedCategories=s.o.A,_.changedServices=s.o.K,d(o)&&o(C(_))),((e,t)=>{dispatchEvent(new CustomEvent(e,{detail:t}))})(e,C(_))},b=(e,t)=>{try{return e()}catch(e){return!t&&console.warn('CookieConsent:',e),!1}},T=e=>{const{G:t,K:o,I:a,B:r,W:i,v:l,A:f}=s.o;for(const e of a){const n=o[e]||t[e]||[];for(const o of n){const n=r[e][o];if(!n)continue;const{onAccept:s,onReject:a}=n;!n.se&&c(t[e],o)?(n.se=!0,d(s)&&s()):n.se&&!c(t[e],o)&&(n.se=!1,d(a)&&a())}}if(!s.t.manageScriptTags)return;const _=i,C=e||l.categories||[],v=(e,s)=>{if(s>=e.length)return;const a=i[s];if(a.ae)return v(e,s+1);const r=a.ce,l=a.re,d=a.ie,_=c(C,l),y=!!d&&c(t[l],d);if(!d&&!a.le&&_||!d&&a.le&&!_&&c(f,l)||d&&!a.le&&y||d&&a.le&&!y&&c(o[l]||[],d)){a.ae=!0;const t=m(r,'type',!0);g(r,'type',!!t),g(r,n);let o=m(r,'src',!0);o&&g(r,'src',!0);const c=u('script');c.textContent=r.innerHTML;for(const{nodeName:e}of r.attributes)p(c,e,r[e]||m(r,e));t&&(c.type=t),o?c.src=o:o=r.src;const i=!!o&&(!t||['text/javascript','module'].includes(t));if(i&&(c.onload=c.onerror=()=>{v(e,++s)}),r.replaceWith(c),i)return}v(e,++s)};v(_,0)},N=e=>b(()=>localStorage.getItem(e))||'',j=e=>b(()=>localStorage.removeItem(e)),k={necessary:'n',functionality:'f',analytics:'a',personalization:'p',marketing:'m'},O={n:'necessary',f:'functionality',a:'analytics',p:'personalization',m:'marketing'},E=()=>{const e=(()=>{const e=document.cookie.match(new RegExp('(^| )_ga=([^;]+)'));return e?e[2]:null})();if(e){const t=e.split('.');if(t.length>=4)return t.slice(2).join('.')}return null},x=()=>{const e=document.cookie.split(';');for(let t of e)if(t=t.trim(),t.startsWith('_ga_')){const e=t.split('=')[1];if(e){const t=e.split('.');if(t.length>=3)return t[2]}}return null},M=e=>{const t=s.t,{enabled:n,endpoint:o,usePreferHeader:a}=t.consentLogging||{};if(!n||!o)return;const c=s.o,{accepted:r,rejected:i}=w(),l={event:e,consent_id:N('cc_consent_id')||c.j,accept_type:c.P||'',accepted_categories:r.join(', '),rejected_categories:i.join(', '),ga4_client_id:E(),ga4_session_id:x(),user_agent:navigator.userAgent,hostname:window.location.hostname,page_url:window.location.href},d={'Content-Type':'application/json'};a&&(d.Prefer='return=minimal'),fetch(o,{method:'POST',headers:d,body:JSON.stringify(l),keepalive:!0}).then(e=>{e.ok?e.status:(e.status,e.statusText)}).catch(e=>{})},A=(e,t)=>{if(t instanceof RegExp)return e.filter(e=>t.test(e));{const n=a(e,t);return n>-1?[e[n]]:[]}},L=e=>{const{hostname:t,protocol:n}=location,{name:o,path:a,domain:r,sameSite:i,useLocalStorage:l,secure:d}=s.t.cookie,f=e?(()=>{const e=s.o.N,t=e?new Date-e:0;return 864e5*y()-t})():864e5*y(),_=new Date;_.setTime(_.getTime()+f),s.o.v.expirationTime=_.getTime();const u=(e=>{const t={};if(e.categories&&(t.c=e.categories.map(e=>k[e]||e)),void 0!==e.revision&&(t.r=e.revision),void 0!==e.data&&null!==e.data&&(t.d=e.data),e.consentTimestamp&&(t.ct='string'==typeof e.consentTimestamp?Math.floor(new Date(e.consentTimestamp).getTime()/1e3):Math.floor(e.consentTimestamp/1e3)),e.consentId&&(t.id=e.consentId),e.services){const n={};for(const t in e.services){const o=k[t]||t;e.services[t]&&e.services[t].length>0&&(n[o]=e.services[t])}Object.keys(n).length>0&&(t.s=n)}return e.languageCode&&(t.l=e.languageCode),e.lastConsentTimestamp&&(t.lct='string'==typeof e.lastConsentTimestamp?Math.floor(new Date(e.lastConsentTimestamp).getTime()/1e3):Math.floor(e.lastConsentTimestamp/1e3)),e.expirationTime&&(t.exp=Math.floor(e.expirationTime/1e3)),t})(s.o.v),p=JSON.stringify(u);let g=o+'='+encodeURIComponent(p)+(0!==f?'; expires='+_.toUTCString():'')+'; Path='+a+'; SameSite='+i;c(t,'.')&&(g+='; Domain='+r),d&&'https:'===n&&(g+='; Secure'),l?((e,t)=>{b(()=>localStorage.setItem(e,t))})(o,p):document.cookie=g,s.o.v},P=(e,t,n)=>{if(0===e.length)return;const o=n||s.t.cookie.domain,a=t||s.t.cookie.path,c='www.'===o.slice(0,4),r=c&&o.substring(4),i=(e,t)=>{t&&'.'!==t.slice(0,1)&&(t='.'+t),document.cookie=e+'=; path='+a+(t?'; domain='+t:'')+'; expires=Thu, 01 Jan 1970 00:00:01 GMT;'};for(const t of e)i(t,n),n||i(t,o),c&&i(t,r)},R=e=>{const t=e||s.t.cookie.name,n=s.t.cookie.useLocalStorage;return((e,t)=>{let n;return n=b(()=>JSON.parse(t?e:decodeURIComponent(e)),!0)||{},(e=>{if(!e||'object'!=typeof e)return e;if(void 0!==e.categories)return e;const t={};if(e.c&&(t.categories=e.c.map(e=>O[e]||e)),void 0!==e.r&&(t.revision=e.r),void 0!==e.d?t.data=e.d:t.data=null,e.ct&&(t.consentTimestamp=new Date(1e3*e.ct).toISOString()),e.id&&(t.consentId=e.id),e.s){t.services={};for(const n in e.s){const o=O[n]||n;t.services[o]=e.s[n]}}else t.services={};return e.l&&(t.languageCode=e.l),e.lct&&(t.lastConsentTimestamp=new Date(1e3*e.lct).toISOString()),e.exp&&(t.expirationTime=1e3*e.exp),t})(n)})(n?N(t):I(t,!0),n)},I=(e,t)=>{const n=document.cookie.match('(^|;)\\s*'+e+'\\s*=\\s*([^;]+)');return n?t?n.pop():e:''},F=e=>{const t=document.cookie.split(/;\s*/),n=[];for(const o of t){let t=o.split('=')[0];e?b(()=>{e.test(t)&&n.push(t)}):n.push(t)}return n},J=(n,o=[])=>{((e,t)=>{const{I:n,F:o,J:a,de:l,q:d,H:_,B:u}=s.o;let p=[];if(e){r(e)?p.push(...e):i(e)&&(p='all'===e?n:[e]);for(const e of n)d[e]=c(p,e)?f(u[e]):[]}else p=[...o,..._];p=p.filter(e=>!c(n,e)||!c(t,e)),p.push(...a),h(p)})(n,o),(()=>{const e=s.o,{q:t,J:n,G:o,B:a,I:r}=e,i=r;e.V=C(o);for(const s of i){const r=a[s],i=f(r),l=t[s]&&t[s].length>0,d=c(n,s);if(0!==i.length){if(o[s]=[],d)o[s].push(...i);else if(l){const e=t[s];o[s].push(...e)}else o[s]=e.q[s];o[s]=_(o[s])}}})(),(()=>{const n=s.o;n.A=s.t.mode===t&&n.k?S(n.H,n.F):S(n.F,n.v.categories);let o=n.A.length>0,a=!1;for(const e of n.I)n.K[e]=S(n.G[e],n.V[e]),n.K[e].length>0&&(a=!0);n.T||(n.T=new Date),n.j||(n.j=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))),n.v={categories:C(n.F),revision:s.t.revision,data:n.D,consentTimestamp:n.T.toISOString(),consentId:n.j,services:C(n.G),languageCode:s.o._},n.N&&(n.v.lastConsentTimestamp=n.N.toISOString());let r=!1;const i=o||a;(n.k||i)&&(n.k&&(n.k=!1,r=!0),n.N=n.N?new Date:n.T,n.v.lastConsentTimestamp=n.N.toISOString(),L(),s.t.autoClearCookies&&(r||i)&&(e=>{const t=s.o,n=F(),o=(e=>{const t=s.o;return(e?t.I:t.A).filter(e=>{const n=t.R[e];return!!n&&!n.readOnly&&!!n.autoClear})})(e);for(const e in t.K)for(const o of t.K[e]){const s=t.B[e][o].cookies;if(!c(t.G[e],o)&&s)for(const e of s){const t=A(n,e.name);P(t,e.path,e.domain)}}for(const s of o){const o=t.R[s].autoClear,a=o&&o.cookies||[],r=c(t.A,s),i=!c(t.F,s),l=r&&i;if(e?i:l){o.reloadPage&&l&&(t.L=!0);for(const e of a){const t=A(n,e.name);P(t,e.path,e.domain)}}}})(r),T()),r&&(M('first_consent'),D(s.Y.Z),D(s.Y.$),s.t.mode===e)||(i&&(D(s.Y.ee),M('consent_update')),n.L&&(n.L=!1,location.reload()))})()},H=e=>{const t=s.o.k?[]:s.o.F;return c(t,e)},U=(e,t)=>{const{I:n,B:o}=s.o;if(!(e&&t&&i(t)&&c(n,t)&&0!==f(o[t]).length))return!1;J()},z=(e,t)=>{const n=s.o.k?[]:s.o.G[t]||[];return c(n,e)},B=e=>''!==I(e,!0),G=(e,t,n)=>{let o=[];const s=e=>{if(i(e)){let t=I(e);''!==t&&o.push(t)}else o.push(...F(e))};if(r(e))for(let t of e)s(t);else s(e);P(o,t,n)},q=()=>{const{P:e,G:t}=s.o,{accepted:n,rejected:o}=w();return C({acceptType:e,acceptedCategories:n,rejectedCategories:o,acceptedServices:t,rejectedServices:v()})},K=(e,t)=>{let n=document.querySelector('script[src="'+e+'"]');return new Promise(o=>{if(n)return o(!0);if(n=u('script'),l(t))for(const e in t)p(n,e,t[e]);var s,a;n.onload=()=>o(!0),n.onerror=()=>{n.remove(),o(!1)},n.src=e,s=document.head,a=n,s.appendChild(a)})},Q=e=>{let t,n=e.value,o=e.mode,a=!1;const c=s.o;if('update'===o){c.D=t=V('data');const e=typeof t==typeof n;if(e&&'object'==typeof t){!t&&(t={});for(let e in n)t[e]!==n[e]&&(t[e]=n[e],a=!0)}else!e&&t||t===n||(t=n,a=!0)}else t=n,a=!0;return a&&(c.D=t,c.v.data=t,L(!0)),a},V=(e,t)=>{const n=R(t);return e?n[e]:n},W=e=>{const t=s.t,n=s.o.i;return e?t[e]||n[e]:{...t,...n,cookie:{...t.cookie}}},X=()=>!s.o.k,Y=async e=>{const{o:o,t:a,Y:d}=s,_=window;if(!_._ccRun){if(_._ccRun=!0,(e=>{const{fe:o,t:a,o:r}=s,i=a,d=r,{cookie:_}=i,u=s.X,p=e.cookie,g=e.categories,C=f(g)||[],v=navigator,y=document;o._e=y,_.domain=location.hostname,d.i=e,d.R=g,d.I=C,u.Z=e.onFirstConsent,u.$=e.onConsent,u.ee=e.onChange;const{mode:S,autoClearCookies:h,revision:w,manageScriptTags:D,hideFromBots:b,consentLogging:T}=e;S===t&&(i.mode=S),'boolean'==typeof h&&(i.autoClearCookies=h),'boolean'==typeof D&&(i.manageScriptTags=D),'number'==typeof w&&w>=0&&(i.revision=w,d.O=!0),!1===b&&(i.hideFromBots=!1),!0===i.hideFromBots&&v&&(d.U=v.userAgent&&/bot|crawl|spider|slurp|teoma/i.test(v.userAgent)||v.webdriver),l(p)&&(i.cookie={..._,...p}),l(T)&&(i.consentLogging={...i.consentLogging,...T}),i.autoClearCookies,d.O,i.manageScriptTags,(e=>{const{R:t,B:n,G:o,q:a,J:c}=s.o;for(let r of e){const e=t[r],i=e.services||{},d=l(i)&&f(i)||[];n[r]={},o[r]=[],a[r]=[],e.readOnly&&(c.push(r),o[r]=d),s.fe.ue[r]={};for(let e of d){const t=i[e];t.se=!1,n[r][e]=t}}})(C),(()=>{if(!s.t.manageScriptTags)return;const e=s.o,t=(o=document,a='script['+n+']',o.querySelectorAll(a));var o,a;for(const o of t){let t=m(o,n),s=o.dataset.service||'',a=!1;if(t&&'!'===t.charAt(0)&&(t=t.slice(1),a=!0),'!'===s.charAt(0)&&(s=s.slice(1),a=!0),c(e.I,t)&&(e.W.push({ce:o,ae:!1,le:a,re:t,ie:s}),s)){const n=e.B[t];n[s]||(n[s]={se:!1})}}})()})(e),o.U)return;if((()=>{const e=s.o,n=s.t,o=R(),{categories:a,services:c,consentId:l,consentTimestamp:d,lastConsentTimestamp:f,data:_,revision:u}=o,p=r(a);e.v=o,e.j=l;const g=!!l&&i(l);e.T=d,e.T&&(e.T=new Date(d)),e.N=f,e.N&&(e.N=new Date(f)),e.D=void 0!==_?_:null,e.O&&g&&u!==n.revision&&(e.M=!1),e.k=!(g&&e.M&&e.T&&e.N&&p),n.cookie.useLocalStorage&&!e.k&&(e.k=(new Date).getTime()>(o.expirationTime||0),e.k&&j(n.cookie.name)),e.k,(()=>{const e=s.o;for(const n of e.I){const o=e.R[n];if(o.readOnly||o.enabled){e.H.push(n);const o=e.B[n]||{};for(let s in o)e.q[n].push(s),e.i.mode===t&&e.G[n].push(s)}}})(),e.k?n.mode===t&&(e.F=[...e.H]):(e.G={...e.G,...c},e.q={...e.G},h([...e.J,...a]))})(),X())return T(),D(d.$);a.mode===t&&T(o.H)}},Z=e=>{const{name:t,path:n,domain:a,useLocalStorage:c}=s.t.cookie;e&&(c?j(t):G(t,n,a));for(const{pe:e,ge:t,me:n}of s.o.S)e.removeEventListener(t,n);const r=new o;for(const e in s)s[e]=r[e];window._ccRun=!1};export{J as acceptCategory,U as acceptService,H as acceptedCategory,z as acceptedService,G as eraseCookies,W as getConfig,V as getCookie,q as getUserPreferences,K as loadScript,Z as reset,Y as run,Q as setCookieData,X as validConsent,B as validCookie};
